<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>Sample of websocket with golang</title>
        <script src="jquery.min.js"></script>
        <script src="jsonrpc.js"></script>
        <script>
            $(function() {
                var msg = $('#msg-list');
                var rpc = jsonrpc.NewClient("ws://"+window.location.host+"/jsonrpc");

                $('#divide').click(function(){
                    var args = {};
                    args.A = parseInt($('#A').val());
                    args.B = parseInt($('#B').val());
                    $('#A').val(args.A);
                    $('#B').val(args.B);
                    rpc.Call({
                        method: "Arith.Divide",
                        params: new Array(args),
                        success: function(result){
                            $('#divide-result').val(result.Quo + " ......" + result.Rem);
                        },
                        error: function(error){
                            msg.prepend("<li>rpc error: " + error + "</li>");
                            $('#divide-result').val("0 ......0");
                        }
                    });
                });

                $('#multiply').click(function(){
                    var args = {};
                    args.A = parseInt($('#A').val());
                    args.B = parseInt($('#B').val());
                    $('#A').val(args.A);
                    $('#B').val(args.B);
                    rpc.Call({
                        method: "Arith.Multiply",
                        params: new Array(args),
                        success: function(result){
                            $('#multiply-result').val(result);
                        },
                        error: function(error){
                            msg.prepend("<li>rpc error: " + error + "</li>");
                            $('#multiply-result').val("0.0");
                        }
                    });
                });

            });
        </script>
    </head>
    <body>
        A: <input id="A" type="text" />
        B: <input id="B" type="text" />
        |
        <input id="multiply-result" type="text" />
        <input type="button" id="multiply" value="Arith.Multiply"></input>
        |
        <input id="divide-result" type="text" />
        <input type="button" id="divide" value="Arith.Devide"></input>
        <hr/>
        <ul id="msg-list"></ul>
    </body>
</html>
